@use '@/assets/style/normalize.css';
@use '@/assets/style/theme.scss';

@keyframes light-to-dark {
  from {
    clip-path: polygon(0 0,
      0 0,
      calc(tan(8deg) * -100vh) 100%,
      calc(tan(8deg) * -100vh) 100%);
  }

  to {
    clip-path: polygon(0 0,
      calc((tan(8deg) * 100vh) + 100%) 0,
      100% 100%,
      calc(tan(8deg) * -100vh) 100%);
  }
}

@keyframes dark-to-light {
  from {
    clip-path: polygon(calc((tan(8deg) * 100vh) + 100%) 0,
      calc((tan(8deg) * 100vh) + 100%) 0,
      100% 100%,
      100% 100%);
  }

  to {
    clip-path: polygon(0 0,
      calc((tan(8deg) * 100vh) + 100%) 0,
      100% 100%,
      calc(tan(8deg) * -100vh) 100%);
  }
}

* {
  margin: 0;
  padding: 0;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

:root {
  color: var(--foreground-color);
  background-color: var(--background-color);
  scroll-behavior: smooth;
  scroll-padding-top: calc(var(--header-height) + var(--mobile-extra-scroll-padding-top, 0px) - 1px);

  &::view-transition-group(root) {
    animation-duration: 1s;
  }

  &::view-transition-new(root),
  &::view-transition-old(root) {
    mix-blend-mode: normal;
  }

  &::view-transition-old(root),
  &.dark::view-transition-old(root) {
    animation: none;
  }

  &::view-transition-new(root) {
    animation-name: dark-to-light;
  }

  &.dark::view-transition-new(root) {
    animation-name: light-to-dark;
  }

  &.hide-scroll-bar {
    overflow-y: hidden;
    padding-right: var(--scroll-bar-width);
  }
}

.fade-enter-active,
.fade-leave-active {
  transition: var(--transition-duration, 0.25s) ease;
}

.loading-fade-enter-active,
.loading-fade-leave-active {
  transition: 0.5s ease;
}

.fade-enter-from,
.fade-leave-to,
.loading-fade-enter-from,
.loading-fade-leave-to {
  opacity: 0;
}

a.page-link {
  text-decoration: none;
  white-space: nowrap;
  color: var(--foreground-color);
  position: relative;
  z-index: 0;
  transition: color var(--transition-duration);
  
  &:hover {
    color: var(--background-color);

    &::before {
      opacity: 1;
      height: 100%;
    }
  }

  &::before {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    display: block;
    width: 100%;
    height: 33%;
    background-color: var(--foreground-color);
    opacity: 0.33;
    z-index: -1;
    transition: var(--transition-duration);
  }
}
